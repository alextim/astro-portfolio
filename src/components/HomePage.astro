---
export interface Props {
  locale: string;
}

import { fetchSection } from '@/api/sections';
import { fetchHome } from '@/api/pages';

import Layout from '@/components/Layout.astro';

import Hero from '@/components/Hero.astro';
import Services from '@/components/sections/Services.astro';
import About from '@/components/sections/About.astro';
import Gallery from '@/components/sections/Gallery.astro';
import Testimonials from '@/components/sections/Testimonials.astro';
import Contacts from '@/components/sections/Contacts.astro';

const { locale } = Astro.props as Props;

const services = await fetchSection('services', locale);
const about = await fetchSection('about', locale);
const gallery = await fetchSection('gallery', locale);
const testimonials = await fetchSection('testimonials', locale);
const contacts = await fetchSection('contacts', locale);

const page = await fetchHome(locale);
const { title, headline, metaTitle, metaDescription, noindex, nofollow } = page || {};

const seo = {
  title: metaTitle,
  description: metaDescription,
  headline,
  noindex,
  nofollow,
};
//   <Hero locale={locale} />
---

<Layout seo={seo}>
  <Hero locale={locale} />
  <Services section={services} />
  <About section={about} />
  <Gallery section={gallery} />
  <Testimonials section={testimonials} />
  <Contacts section={contacts} />
</Layout>
