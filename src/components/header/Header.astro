---
export interface Props {
  locale: string;
}

import Containter from '../Container.astro';

import Logo from './components/Logo.astro';
import Hamburger from './components/Hamburger.astro';
import Menu from './components/menu/Menu.astro';

const { locale } = Astro.props as Props;
---

<header id="header" role="navigation" class="header">
  <Containter classes="flex flex-wrap items-center justify-between font-sans lg:flex-nowrap">
    <Logo />
    <Hamburger />
    <Menu locale={locale} />
  </Containter>
</header>

<script>
  const OFFSET = 50;
  const SHRINK_CLASS = 'shrink';

  const header = document.getElementById('header');

  const scrollHandler = () => {
    const shrink = document.body.scrollTop > OFFSET || document.documentElement.scrollTop > OFFSET;
    header.classList.toggle(SHRINK_CLASS, shrink);
  };

  window.addEventListener('scroll', scrollHandler, false);

  const mainNav = document.getElementById('main-nav');

  /**
   * Hamburger Toggle
   *
   */
  const menuToggle = document.getElementById('menu-toggle');

  const menuToggleHandler = () => {
    menuToggle.toggleAttribute('aria-expanded');
    menuToggle.classList.toggle('open');
    mainNav.classList.toggle('open');
  };
  menuToggle.addEventListener('click', menuToggleHandler, false);
</script>

<style>
  .header {
    @apply fixed top-0 left-0 right-0
      z-30 flex flex-wrap items-center
      justify-between bg-blue-600
      py-3
      px-4
      text-sm
      lg:flex-nowrap lg:justify-start
      lg:bg-transparent lg:py-4;

    &.shrink {
      @apply lg:bg-blue-600 lg:py-1;
    }
  }
</style>
